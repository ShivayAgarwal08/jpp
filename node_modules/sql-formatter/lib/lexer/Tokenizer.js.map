{"version":3,"file":"Tokenizer.js","names":["TokenType","regex","TokenizerEngine","escapeRegExp","patternToRegex","equalizeWhitespace","NestedComment","Tokenizer","constructor","cfg","dialectName","rulesBeforeParams","buildRulesBeforeParams","rulesAfterParams","buildRulesAfterParams","tokenize","input","paramTypesOverrides","rules","buildParamRules","tokens","postProcess","validRules","type","BLOCK_COMMENT","nestedBlockComments","LINE_COMMENT","lineComment","lineCommentTypes","QUOTED_IDENTIFIER","string","identTypes","NUMBER","RESERVED_PHRASE","reservedWord","reservedPhrases","identChars","text","toCanonical","CASE","END","BETWEEN","LIMIT","reservedClauses","includes","undefined","RESERVED_CLAUSE","RESERVED_SELECT","reservedSelect","RESERVED_SET_OPERATION","reservedSetOperations","WHEN","ELSE","THEN","RESERVED_JOIN","reservedJoins","AND","OR","XOR","supportsXor","RESERVED_FUNCTION_NAME","reservedFunctionNames","RESERVED_KEYWORD","reservedKeywords","VARIABLE","variableTypes","variable","STRING","stringTypes","IDENTIFIER","identifier","DELIMITER","COMMA","OPEN_PAREN","parenthesis","extraParens","CLOSE_PAREN","OPERATOR","operator","operators","ASTERISK","DOT","paramTypes","named","quoted","numbered","positional","custom","NAMED_PARAMETER","parameter","identifierPattern","paramChars","key","v","slice","QUOTED_PARAMETER","stringPattern","tokenKey","quoteChar","replace","RegExp","NUMBERED_PARAMETER","POSITIONAL_PARAMETER","map","customParam","CUSTOM_PARAMETER","filter","rule","Boolean","toUpperCase"],"sources":["../../src/lexer/Tokenizer.ts"],"sourcesContent":["import { Token, TokenType } from './token.js';\nimport * as regex from './regexFactory.js';\nimport { ParamTypes, TokenizerOptions } from './TokenizerOptions.js';\nimport TokenizerEngine, { TokenRule } from './TokenizerEngine.js';\nimport { escapeRegExp, patternToRegex } from './regexUtil.js';\nimport { equalizeWhitespace, Optional } from '../utils.js';\nimport { NestedComment } from './NestedComment.js';\n\ntype OptionalTokenRule = Optional<TokenRule, 'regex'>;\n\nexport default class Tokenizer {\n  private rulesBeforeParams: TokenRule[];\n  private rulesAfterParams: TokenRule[];\n\n  constructor(private cfg: TokenizerOptions, private dialectName: string) {\n    this.rulesBeforeParams = this.buildRulesBeforeParams(cfg);\n    this.rulesAfterParams = this.buildRulesAfterParams(cfg);\n  }\n\n  public tokenize(input: string, paramTypesOverrides: ParamTypes): Token[] {\n    const rules = [\n      ...this.rulesBeforeParams,\n      ...this.buildParamRules(this.cfg, paramTypesOverrides),\n      ...this.rulesAfterParams,\n    ];\n    const tokens = new TokenizerEngine(rules, this.dialectName).tokenize(input);\n    return this.cfg.postProcess ? this.cfg.postProcess(tokens) : tokens;\n  }\n\n  // These rules can be cached as they only depend on\n  // the Tokenizer config options specified for each SQL dialect\n  private buildRulesBeforeParams(cfg: TokenizerOptions): TokenRule[] {\n    return this.validRules([\n      {\n        type: TokenType.BLOCK_COMMENT,\n        regex: cfg.nestedBlockComments ? new NestedComment() : /(\\/\\*[^]*?\\*\\/)/uy,\n      },\n      {\n        type: TokenType.LINE_COMMENT,\n        regex: regex.lineComment(cfg.lineCommentTypes ?? ['--']),\n      },\n      {\n        type: TokenType.QUOTED_IDENTIFIER,\n        regex: regex.string(cfg.identTypes),\n      },\n      {\n        type: TokenType.NUMBER,\n        regex:\n          /(?:0x[0-9a-fA-F]+|0b[01]+|(?:-\\s*)?[0-9]+(?:\\.[0-9]*)?(?:[eE][-+]?[0-9]+(?:\\.[0-9]+)?)?)(?![\\w\\p{Alphabetic}])/uy,\n      },\n      // RESERVED_PHRASE is matched before all other keyword tokens\n      // to e.g. prioritize matching \"TIMESTAMP WITH TIME ZONE\" phrase over \"WITH\" clause.\n      {\n        type: TokenType.RESERVED_PHRASE,\n        regex: regex.reservedWord(cfg.reservedPhrases ?? [], cfg.identChars),\n        text: toCanonical,\n      },\n      {\n        type: TokenType.CASE,\n        regex: /CASE\\b/iuy,\n        text: toCanonical,\n      },\n      {\n        type: TokenType.END,\n        regex: /END\\b/iuy,\n        text: toCanonical,\n      },\n      {\n        type: TokenType.BETWEEN,\n        regex: /BETWEEN\\b/iuy,\n        text: toCanonical,\n      },\n      {\n        type: TokenType.LIMIT,\n        regex: cfg.reservedClauses.includes('LIMIT') ? /LIMIT\\b/iuy : undefined,\n        text: toCanonical,\n      },\n      {\n        type: TokenType.RESERVED_CLAUSE,\n        regex: regex.reservedWord(cfg.reservedClauses, cfg.identChars),\n        text: toCanonical,\n      },\n      {\n        type: TokenType.RESERVED_SELECT,\n        regex: regex.reservedWord(cfg.reservedSelect, cfg.identChars),\n        text: toCanonical,\n      },\n      {\n        type: TokenType.RESERVED_SET_OPERATION,\n        regex: regex.reservedWord(cfg.reservedSetOperations, cfg.identChars),\n        text: toCanonical,\n      },\n      {\n        type: TokenType.WHEN,\n        regex: /WHEN\\b/iuy,\n        text: toCanonical,\n      },\n      {\n        type: TokenType.ELSE,\n        regex: /ELSE\\b/iuy,\n        text: toCanonical,\n      },\n      {\n        type: TokenType.THEN,\n        regex: /THEN\\b/iuy,\n        text: toCanonical,\n      },\n      {\n        type: TokenType.RESERVED_JOIN,\n        regex: regex.reservedWord(cfg.reservedJoins, cfg.identChars),\n        text: toCanonical,\n      },\n      {\n        type: TokenType.AND,\n        regex: /AND\\b/iuy,\n        text: toCanonical,\n      },\n      {\n        type: TokenType.OR,\n        regex: /OR\\b/iuy,\n        text: toCanonical,\n      },\n      {\n        type: TokenType.XOR,\n        regex: cfg.supportsXor ? /XOR\\b/iuy : undefined,\n        text: toCanonical,\n      },\n      {\n        type: TokenType.RESERVED_FUNCTION_NAME,\n        regex: regex.reservedWord(cfg.reservedFunctionNames, cfg.identChars),\n        text: toCanonical,\n      },\n      {\n        type: TokenType.RESERVED_KEYWORD,\n        regex: regex.reservedWord(cfg.reservedKeywords, cfg.identChars),\n        text: toCanonical,\n      },\n    ]);\n  }\n\n  // These rules can also be cached as they only depend on\n  // the Tokenizer config options specified for each SQL dialect\n  private buildRulesAfterParams(cfg: TokenizerOptions): TokenRule[] {\n    return this.validRules([\n      {\n        type: TokenType.VARIABLE,\n        regex: cfg.variableTypes ? regex.variable(cfg.variableTypes) : undefined,\n      },\n      { type: TokenType.STRING, regex: regex.string(cfg.stringTypes) },\n      {\n        type: TokenType.IDENTIFIER,\n        regex: regex.identifier(cfg.identChars),\n      },\n      { type: TokenType.DELIMITER, regex: /[;]/uy },\n      { type: TokenType.COMMA, regex: /[,]/y },\n      {\n        type: TokenType.OPEN_PAREN,\n        regex: regex.parenthesis('open', cfg.extraParens),\n      },\n      {\n        type: TokenType.CLOSE_PAREN,\n        regex: regex.parenthesis('close', cfg.extraParens),\n      },\n      {\n        type: TokenType.OPERATOR,\n        regex: regex.operator([\n          // standard operators\n          '+',\n          '-',\n          '/',\n          '>',\n          '<',\n          '=',\n          '<>',\n          '<=',\n          '>=',\n          '!=',\n          ...(cfg.operators ?? []),\n        ]),\n      },\n      { type: TokenType.ASTERISK, regex: /[*]/uy },\n      { type: TokenType.DOT, regex: /[.]/uy },\n    ]);\n  }\n\n  // These rules can't be blindly cached as the paramTypesOverrides object\n  // can differ on each invocation of the format() function.\n  private buildParamRules(cfg: TokenizerOptions, paramTypesOverrides: ParamTypes): TokenRule[] {\n    // Each dialect has its own default parameter types (if any),\n    // but these can be overriden by the user of the library.\n    const paramTypes = {\n      named: paramTypesOverrides?.named || cfg.paramTypes?.named || [],\n      quoted: paramTypesOverrides?.quoted || cfg.paramTypes?.quoted || [],\n      numbered: paramTypesOverrides?.numbered || cfg.paramTypes?.numbered || [],\n      positional:\n        typeof paramTypesOverrides?.positional === 'boolean'\n          ? paramTypesOverrides.positional\n          : cfg.paramTypes?.positional,\n      custom: paramTypesOverrides?.custom || cfg.paramTypes?.custom || [],\n    };\n\n    return this.validRules([\n      {\n        type: TokenType.NAMED_PARAMETER,\n        regex: regex.parameter(\n          paramTypes.named,\n          regex.identifierPattern(cfg.paramChars || cfg.identChars)\n        ),\n        key: v => v.slice(1),\n      },\n      {\n        type: TokenType.QUOTED_PARAMETER,\n        regex: regex.parameter(paramTypes.quoted, regex.stringPattern(cfg.identTypes)),\n        key: v =>\n          (({ tokenKey, quoteChar }) =>\n            tokenKey.replace(new RegExp(escapeRegExp('\\\\' + quoteChar), 'gu'), quoteChar))({\n            tokenKey: v.slice(2, -1),\n            quoteChar: v.slice(-1),\n          }),\n      },\n      {\n        type: TokenType.NUMBERED_PARAMETER,\n        regex: regex.parameter(paramTypes.numbered, '[0-9]+'),\n        key: v => v.slice(1),\n      },\n      {\n        type: TokenType.POSITIONAL_PARAMETER,\n        regex: paramTypes.positional ? /[?]/y : undefined,\n      },\n      ...paramTypes.custom.map(\n        (customParam): TokenRule => ({\n          type: TokenType.CUSTOM_PARAMETER,\n          regex: patternToRegex(customParam.regex),\n          key: customParam.key ?? (v => v),\n        })\n      ),\n    ]);\n  }\n\n  // filters out rules for token types whose regex is undefined\n  private validRules(rules: OptionalTokenRule[]): TokenRule[] {\n    return rules.filter((rule): rule is TokenRule => Boolean(rule.regex));\n  }\n}\n\n/**\n * Converts keywords (and keyword sequences) to canonical form:\n * - in uppercase\n * - single spaces between words\n */\nconst toCanonical = (v: string) => equalizeWhitespace(v.toUpperCase());\n"],"mappings":"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"}